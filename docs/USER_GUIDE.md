# KkOps 用户使用指南

## 目录

- [快速开始](#快速开始)
- [用户认证](#用户认证)
- [资产管理](#资产管理)
- [运维执行](#运维执行)
- [WebSSH 终端](#webssh-终端)
- [常见问题](#常见问题)

## 快速开始

### 登录系统

1. 打开浏览器，访问 `http://localhost:3000`
2. 使用默认管理员账号登录：
   - **用户名**: `admin`
   - **密码**: `admin123`
3. 首次登录后，请立即修改默认密码

### 导航菜单

系统主界面包含以下功能模块：

- **仪表板**: 系统概览和统计信息
- **资产管理**: 管理服务器、网络设备等 IT 资产
- **运维执行**: 创建和执行运维任务
- **任务模板**: 管理可重用的任务模板
- **SSH 密钥**: 管理 SSH 密钥
- **WebSSH**: Web 终端连接服务器
- **用户管理**: 用户账号管理（需要管理员权限）
- **角色权限**: 角色和权限管理（需要管理员权限）

## 用户认证

### 登录

1. 在登录页面输入用户名和密码
2. 点击"登录"按钮
3. 登录成功后会自动跳转到仪表板

### 退出登录

点击右上角的用户菜单，选择"退出登录"

### 修改密码

1. 进入"用户管理"页面
2. 找到您的用户账号
3. 点击"编辑"按钮
4. 修改密码并保存

## 资产管理

### 创建项目

1. 进入"项目"页面
2. 点击"新建项目"按钮
3. 填写项目信息：
   - 项目名称
   - 项目描述
   - 项目代码（可选）
4. 点击"确定"保存

### 创建资产分类

1. 进入"资产分类"页面
2. 点击"新建分类"按钮
3. 填写分类信息：
   - 分类名称
   - 分类描述
4. 点击"确定"保存

### 创建标签

1. 进入"标签"页面
2. 点击"新建标签"按钮
3. 填写标签信息：
   - 标签名称
   - 标签颜色（可选）
4. 点击"确定"保存

### 添加资产

1. 进入"资产管理"页面
2. 点击"新建资产"按钮
3. 填写资产信息：
   - 资产名称
   - 所属项目
   - 资产分类
   - 云平台（AWS、阿里云、腾讯云等）
   - IP 地址
   - SSH 端口（默认 22）
   - SSH 密钥（选择已配置的 SSH 密钥）
   - 硬件配置（CPU、内存、磁盘）
   - 环境（开发、测试、UAT、生产）
   - 状态（激活、禁用）
   - 标签（可多选）
4. 点击"确定"保存

### 搜索和筛选资产

在资产列表页面可以使用以下方式查找资产：

- **搜索框**: 输入关键词搜索资产名称、IP 地址等
- **状态筛选**: 按状态（激活/禁用）筛选
- **环境筛选**: 按环境（开发/测试/UAT/生产）筛选
- **项目筛选**: 按项目筛选
- **标签筛选**: 按标签筛选

### 导入/导出资产

#### 导入资产

1. 进入"资产管理"页面
2. 点击"导入"按钮
3. 选择 CSV 或 Excel 文件
4. 系统会自动解析并导入资产数据

#### 导出资产

1. 进入"资产管理"页面
2. 点击"导出"按钮
3. 系统会下载当前筛选条件下的资产列表（CSV 格式）

## 运维执行

### 创建任务模板

1. 进入"任务模板"页面
2. 点击"新建模板"按钮
3. 填写模板信息：
   - 模板名称
   - 模板类型（Shell、Python、Ansible 等）
   - 模板内容（脚本内容）
   - 模板描述
4. 点击"确定"保存

### 创建任务

1. 进入"任务管理"页面
2. 点击"新建任务"按钮
3. 填写任务信息：
   - 任务名称
   - 任务模板（可选，选择后会自动填充内容）
   - 任务类型
   - 任务内容（脚本或命令）
   - 目标资产（选择要执行任务的服务器）
4. 点击"确定"保存

### 执行任务

1. 在任务列表中找到要执行的任务
2. 点击"执行"按钮
3. 选择执行方式：
   - **同步执行**: 等待执行完成后返回结果
   - **异步执行**: 后台执行，可通过日志查看进度
4. 执行结果会显示：
   - 执行状态（成功/失败/运行中）
   - 退出码
   - 输出内容
   - 错误信息（如果有）

### 查看执行日志

1. 在任务列表中找到任务
2. 点击"查看执行记录"按钮
3. 选择要查看的执行记录
4. 实时日志页面会显示：
   - 实时输出内容
   - 执行状态
   - 退出码

### 取消任务执行

对于正在执行的任务，可以点击"取消"按钮来终止执行

## WebSSH 终端

### 配置 SSH 密钥

在使用 WebSSH 之前，需要先配置 SSH 密钥：

1. 进入"SSH 密钥"页面
2. 点击"新建密钥"按钮
3. 填写密钥信息：
   - 密钥名称
   - 私钥内容（粘贴 SSH 私钥）
   - 密钥密码（如果私钥有密码保护）
   - 默认用户（连接时使用的默认用户名）
4. 点击"测试连接"按钮验证密钥是否有效
5. 点击"确定"保存

### 连接服务器

1. 进入"WebSSH"页面
2. 选择要连接的资产（服务器）
3. 填写连接信息：
   - SSH 用户（如果与默认用户不同）
   - SSH 端口（如果与资产配置的不同）
4. 点击"连接"按钮
5. 终端窗口会显示服务器命令行界面

### 使用终端

- 在终端窗口中输入命令并按 Enter 执行
- 支持标准 Linux/Unix 命令
- 支持 Ctrl+C 中断命令
- 支持终端大小自动调整

### 断开连接

点击"断开连接"按钮来关闭 SSH 连接

## 常见问题

### 无法登录系统

- 检查用户名和密码是否正确
- 确认账户状态是否为"激活"
- 联系管理员检查账户权限

### SSH 连接失败

- 检查 SSH 密钥是否正确配置
- 确认服务器 IP 和端口是否正确
- 检查服务器防火墙设置
- 确认 SSH 服务是否正常运行

### 任务执行失败

- 检查任务内容（脚本）是否有语法错误
- 确认目标服务器可以访问
- 检查服务器上是否有执行权限
- 查看执行日志中的错误信息

### 资产导入失败

- 检查导入文件格式是否为 CSV 或 Excel
- 确认文件中的字段与系统要求匹配
- 检查必填字段是否都已填写
- 查看错误提示信息

## 获取帮助

如果遇到问题，可以：

1. 查看本文档的常见问题部分
2. 联系系统管理员
3. 查看系统日志（管理员权限）
