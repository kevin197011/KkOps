# Change: 增加审计日志功能

## Why

当前系统缺乏完整的操作审计能力，仅在仪表板显示最近的任务执行记录。运维平台需要完整的审计日志功能，以便：
- 追踪用户的所有关键操作（登录、资产管理、任务执行等）
- 满足安全合规要求
- 支持问题排查和责任追溯
- 提供操作统计和分析能力

## What Changes

### 后端变更
- 新增 `audit_logs` 数据库表存储审计记录
- 新增审计日志 Model、Service、Handler
- 实现审计中间件自动记录 API 操作
- 提供审计日志查询 API（支持分页、筛选、时间范围）
- 支持导出审计日志（CSV/JSON 格式）

### 前端变更
- 新增"审计日志"菜单项（位于"角色权限"下方）
- 实现审计日志列表页面
  - 支持按操作类型、用户、时间范围筛选
  - 支持关键词搜索
  - 分页展示
  - 查看操作详情
- 支持导出审计日志

### 审计范围
记录以下操作类型：
| 模块 | 操作类型 |
|------|---------|
| 认证 | 登录、登出、修改密码 |
| 用户管理 | 创建、编辑、删除用户、角色分配 |
| 角色管理 | 创建、编辑、删除角色、权限配置 |
| 资产管理 | 创建、编辑、删除资产 |
| 任务执行 | 创建、执行、取消任务 |
| 定时任务 | 创建、编辑、删除、启用/禁用定时任务 |
| 部署管理 | 创建、编辑、删除模块、执行部署 |
| SSH 操作 | WebSSH 连接 |

## Impact

- **新增数据表**: `audit_logs`
- **新增 API 端点**: `/api/v1/audit-logs`
- **新增前端页面**: `/audit-logs`
- **新增中间件**: 审计日志记录中间件
- **受影响的现有代码**: 所有需要审计的 Handler 需要添加审计调用

## 非功能性需求

- 审计日志不可删除（只读）
- 支持大量数据的高效查询（索引优化）
- 敏感信息（如密码）不记录在审计日志中
- 审计日志保留策略可配置（默认保留 90 天）
