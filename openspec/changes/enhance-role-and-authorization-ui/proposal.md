# Change: 增强角色管理和资产授权界面

## Why

当前实现存在以下问题：
1. **角色管理过于简陋**：创建/编辑角色时无法设置是否为管理员角色（is_admin），用户只能看到角色名称和描述
2. **资产授权不够便捷**：当前只能逐个选择资产，当资产数量较多时操作繁琐，缺乏按项目或环境批量授权的能力

## What Changes

### 角色管理增强
- **MODIFIED**: 角色列表显示管理员标识（Tag）
- **MODIFIED**: 创建/编辑角色时增加"管理员角色"开关
- **ADDED**: 后端 API 支持 is_admin 字段的创建和更新

### 资产授权增强
- **MODIFIED**: 授权弹窗增加"按项目授权"选项
- **MODIFIED**: 授权弹窗增加"按环境授权"选项
- **MODIFIED**: 支持项目/环境选择后批量添加资产到授权列表
- **ADDED**: 资产树形结构展示（项目 → 环境 → 资产）

## Impact

- **Affected specs**: role-authorization-ui (new)
- **Affected code**:
  - `frontend/src/pages/roles/RoleList.tsx` - 角色列表增加管理员标识和编辑开关
  - `frontend/src/api/role.ts` - Role 类型添加 is_admin 字段
  - `frontend/src/pages/users/UserList.tsx` - 授权弹窗增加项目/环境筛选
  - `backend/internal/handler/role/handler.go` - 确保 is_admin 字段可更新
  - `backend/internal/service/role/service.go` - 角色服务支持 is_admin 更新

## UI Design Preview

### 角色管理列表
```
| ID | 角色名称 | 管理员   | 描述               | 操作        |
|----|----------|----------|--------------------|-------------|
| 1  | admin    | ✅ 管理员 | 系统管理员         | 编辑 删除   |
| 2  | ops      | -        | 运维人员           | 编辑 删除   |
| 3  | dev      | -        | 开发人员           | 编辑 删除   |
```

### 创建/编辑角色弹窗
```
┌─ 新增角色 ──────────────────────────┐
│                                      │
│  角色名称 *                          │
│  ┌──────────────────────────────┐   │
│  │ ops                          │   │
│  └──────────────────────────────┘   │
│                                      │
│  描述                                │
│  ┌──────────────────────────────┐   │
│  │ 运维人员角色                  │   │
│  │                              │   │
│  └──────────────────────────────┘   │
│                                      │
│  ☐ 设为管理员角色                    │
│  （管理员可访问所有资产）            │
│                                      │
│            [取消]  [确定]            │
└──────────────────────────────────────┘
```

### 资产授权弹窗
```
┌─ 资产授权 - user01 ─────────────────────────────────────────┐
│                                                              │
│  快速授权:                                                   │
│  ┌─────────────────┐  ┌─────────────────┐                   │
│  │ 选择项目 ▼      │  │ 选择环境 ▼      │  [添加到授权]     │
│  └─────────────────┘  └─────────────────┘                   │
│                                                              │
│  ┌─────────────── 未授权资产 ───────────────────────────┐   │
│  │ 🔍 搜索主机名或IP                                    │   │
│  ├──────────────────────────────────────────────────────┤   │
│  │ □ web-server-01  192.168.1.10  [生产环境]           │   │
│  │ □ web-server-02  192.168.1.11  [生产环境]           │   │
│  │ □ db-server-01   192.168.1.20  [测试环境]           │   │
│  └──────────────────────────────────────────────────────┘   │
│                        ↓ ↑                                   │
│  ┌─────────────── 已授权资产 ───────────────────────────┐   │
│  │ □ api-server-01  192.168.1.5   [开发环境]           │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│                                   [取消]  [保存]            │
└──────────────────────────────────────────────────────────────┘
```
