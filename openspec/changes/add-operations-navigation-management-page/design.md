# Design: 运维导航管理页面

## Context
当前运维导航工具仅能在仪表盘页面查看，管理员需要通过 API 直接管理工具。需要创建一个独立的管理页面，提供友好的界面来管理运维工具。

## Goals / Non-Goals

### Goals
- 创建独立的运维导航管理页面
- 提供工具列表展示（表格形式）
- 支持添加、编辑、删除工具操作
- 根据权限控制功能可见性

### Non-Goals
- 不改变仪表盘页面的运维导航展示功能
- 不实现拖拽排序功能（初期版本）
- 不实现批量操作功能（初期版本）

## Decisions

### Decision 1: 菜单位置
**选择**: 在仪表盘菜单项下方添加"运维导航"菜单项

**原因**: 
- 符合用户请求（"放在仪表盘菜单下面"）
- 逻辑上相关（运维导航与仪表盘相关）
- 独立的菜单项便于访问

**菜单结构**:
```
- 仪表板
[分隔线]
- 运维导航  <-- 新增
- 基础设施
  - 项目管理
  - ...
```

### Decision 2: 页面布局
**选择**: 使用标准的列表+弹窗表单模式

**原因**: 
- 与项目其他管理页面保持一致（如项目管理、环境管理等）
- 降低学习成本
- 实现简单高效

**布局**:
- 顶部：标题 + "新增工具"按钮
- 主体：表格展示工具列表
- 弹窗：创建/编辑表单

### Decision 3: 图标输入方式
**选择**: 支持图标名称输入（Ant Design 图标）或图标 URL

**原因**: 
- 简单直接，不增加复杂度
- 后期可以扩展为图标选择器
- 支持自定义图标 URL

### Decision 4: 权限控制
**选择**: 
- 所有用户可查看工具列表（`operation-tools:read`）
- 仅管理员可添加/编辑/删除（`operation-tools:*`）

**原因**: 
- 符合最小权限原则
- 与后端 API 权限一致

## UI Design

### 页面结构
```
运维导航管理
├── 页面标题: "运维导航"
├── 操作按钮: "新增工具" (仅管理员)
└── 工具列表表格
    ├── 列: ID, 名称, 分类, 图标, URL, 排序, 状态, 创建时间, 操作
    └── 操作列: "编辑", "删除" (仅管理员)
```

### 创建/编辑表单
- 名称（必填，Input）
- 描述（TextArea）
- 分类（Input，可选）
- 图标（Input，支持图标名称或 URL）
- URL（必填，Input，需要验证 HTTP/HTTPS 格式）
- 排序（InputNumber，默认 0）
- 启用状态（Switch，默认 true）

### 表格列设计
- ID：数字，宽度 80px
- 名称：文本，可点击跳转（打开工具 URL）
- 分类：标签（Tag）
- 图标：显示图标或图标预览
- URL：链接，可点击打开
- 排序：数字
- 状态：标签（启用/禁用）
- 创建时间：日期时间
- 操作：编辑、删除按钮（仅管理员可见）

## Risks / Trade-offs

### Risk 1: 图标输入体验
**风险**: 用户不知道可用的图标名称

**缓解**: 
- 在表单中提供提示或常见图标列表
- 支持图标 URL，可以使用自定义图标

### Risk 2: URL 验证
**风险**: 用户输入无效 URL

**缓解**: 
- 前端和后端双重验证
- 提供清晰的错误提示

### Trade-off: 图标选择器
**选择**: 初期版本使用文本输入，不实现图标选择器

**优势**: 实现简单，快速上线
**劣势**: 用户体验稍差

**未来改进**: 可以实现图标选择器组件

## Migration Plan

### 数据迁移
无需数据迁移，直接使用现有数据库表。

### 功能兼容
- 仪表盘页面的运维导航展示功能保持不变
- 管理页面使用相同的 API 接口
- 两者共享同一数据源

## Open Questions

1. **图标选择器**: 是否需要在初期版本实现图标选择器？
   - **决定**: 初期版本使用文本输入，未来可以扩展

2. **排序功能**: 是否需要实现拖拽排序？
   - **决定**: 初期版本不实现，使用排序字段手动设置
